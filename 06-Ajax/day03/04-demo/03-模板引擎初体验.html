<!--
 * @Author: Ling Hui Shi
 * @Date: 2020-02-16 19:54:48
 * @LastEditors: Ling Hui Shi
 * @LastEditTime: 2020-04-20 23:19:00
 * @Description: 
 -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>

  <div id="user">
    <!-- 挖个坑 -->
    <!-- <p>姓名: xx</p>
    <p>年龄: xx</p>
    <p>性别: xx</p>
    <p>描述: xx</p> -->
  </div>

  <!--  使用模板引擎 -->
  <!-- 1. 引包 -->
  <!-- 模板引擎也是一个js库, 是一个js文件, 模板引擎也是js -->
  <!-- ps: 模板引擎和jq是没有关系的 -->
  <script src="template-web.js"></script>

  <!-- 2. 准备模板 (挖个坑) , 指定 type = "text/html", 告诉浏览器当前这个是 html 模板, 不需要被解析执行, 这也是script的一种type类型 -->
  <!-- 可以先写模板, 再引包, 没有顺序要求 -->
  <!-- 模板不会被当成js, 浏览器不会解析和执行模板 -->
  <!-- 浏览器也不会将模板的内容渲染到页面上 -->
  <!-- 模板中的写法和html标签类似, 在模板中, 只有{{}}里的内容最后会被 解析 和 执行, {{}}外的内容, 最后都会被原文输出到模板最终返回的html字符串中 -->
  <!-- 在模板中的任意地方的, {{}}里, {{}}里的内容会被解析和执行, 并将{{}}里解析执行的最终结果覆盖替换覆盖掉对应的整个{{}}, 然后输出到模板最终返回的字符串中 :
        包含以下1>, 2>, 3>, 4>, 5>
        1> 在模板中的任意地方, 只要在{{}}内就可以直接通过数据对象中的属性名访问/使用数据对象中的属性值, 还可以同时写其他内容, 比如js基本语法 {{ name + '你好' }}
        2> 在{{}} 内 可以直接通过数据对象中的属性名 支持多个, 多次 的访问 ★数据对象 中的属性的属性值
        3> {{}}内支持js的基本语法, 表达式, 内置函数, 内置方法的使用, 三元表达式等所有js基本语法
        4> 会将{{}}里解析执行的最终结果输出到模板返回的字符串中
        5> 在模板中, 可以在任何地方使用{{}}, 标签文本处, 或标签属性处, 或其他模板中任意地方, 都可以直接通过数据对象中的属性名直接获取数据对象中对应的属性值, 不管是在 {{ if }} 语法内 或者在 {{ each }} 语法内 或者在其他任意地方中都可以
        ps: 在模板中的引号里, 也可以用{{}}, 也拥有{{}}特性, 也会被解析和执行并将最终结果输出到模板字符串中
            type="text/html", 告诉浏览器是一个html模板, 里面都是标签字符串
        ★: 若{{}}解析和执行的最后结果为字符串, 则输出到模板最后返回的html字符串时, 不会带最外层引号, 因为字符串在单独输出时不带最外层引号
  -->
  <!-- 在模板中任意地方(包括标签属性中, 标签内部文本部分, 等其他模板中任意地方), 都可以使用{{}}, 最终都会被解析 -->
  <!-- 在模板中, ★ 能且只能访问数据对象中的属性, 并且需要通过{{}} -->
  <!-- 数据对象结合模板时, 模板, 从上到下按顺序解析生成html字符串 -->
  <!-- 在模板中, 最外层标签可以是并列关系, 也可以是嵌套关系 -->
  <!-- 模板要放在 将模板和数据相结合 之前-->
  <!-- 一个页面可以有多个模板, 且模板可以被多次使用 -->
  <!-- 一个页面可以多次使用模板引擎函数template, 进行页面渲染 -->
  <!-- 多个script 与 页面引入的js文件 共享这个页面的所有模板 -->
  <!-- 在模板中, 不建议写注释, 可能会出错 -->
  <script type="text/html" id="tpl">
    <p name="abc">姓名: {{ name }} </p>
    <p age='aa'>年龄: {{ age }}</p>
    <p>性别: {{ sex }}</p>
    <p>描述: {{ desc }}</p>
  </script>

  <script>
    // 找对象
    var user = document.getElementById("user");

    // 3. 准备数据
    // 从后台通过 ajax 获取数据
    var obj = {
      name: "小王",
      age: 18,
      sex: 1,   // 1 表示 男,  0 表示 女
      desc: "猥琐"
    };

    // 4. 将模板和数据相结合
    //    template( "模板id", 数据对象 ); 返回值是一个 html 字符串
    //    在模板中可以使用数据对象的属性, 对象的属性都将成为模板中的变量
    //    注意: 参数2必须是一个对象, 不能是数组或函数
    //          但是对象的属性没有要求, 可以是任意类型
    //          如果数据是数组, 可以将数组包装到数据对象的一个属性中去, 这样在模板中也能获取和使用数组
    //    ★ template方法做了什么?
    //        执行template方法, 会对模板进行解析, 只要是{{}}里的内容(双括号在双引号里, {{}}也会被解析和执行, 而引号由于在{{}}外, 会被原文输出 ), 就会被解析和执行, 并将解析和执行的最终结果输出到返回的html字符串中 (若{{}}解析和执行的最后结果为字符串, 则输出时不会带最外层引号, 因为字符串输出不带最外层引号)
    //        {{}}外的内容, 则原文输出到返回的字符串中, ★ 包括单引号, 双引号, 都会原文输出
    //        ★ 最后返回一个渲染后的 html 字符串
    //    ★ template 方法最终返回一个解析后的模板字符串.

    //    ps: 模板和数据相结合, 一个模板可以被template调用多次, 每次根据传入的数据对象进行解析, 最后返回一个html字符串
    //    注意: ★ 模板一定要写在template之前, 因为js是一行一行执行代码的, 模板要写在template(模板和数据相结合)这段代码之前, 这样执行的时候才能拿到模板
    //    页面可以多次使用模板引擎函数template, 进行渲染
    var htmlStr = template( "tpl", obj );

    // 5. 将模板返回的渲染后的html字符串模板, 通过innerHtml或者jq的html()渲染到 页面中 ( 填坑 )
    //    ps: 模板引擎利用的是innerHtml和jq的html() 可以识别字符串中的html标签.
    user.innerHTML = htmlStr;


  </script>
</body>
</html>
