<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <div id="app">
    <ul>
      <li>
        <!-- 入口：实际上就是一个a标签 -->
        <!-- router-link也是vue-router.js中提供的组件, 所以需要写在视图或模板视图template中 -->
        <!-- 会被解析成一个a标签, href="#/home", 即锚点跳转 -->
        <router-link to="/home">首页</router-link>
      </li>
    </ul>

    <!-- 指定路由出口 -->
    <!-- router-view就是vue-router.js 中提供的组件, 所以需要写在视图或模板视图template中 -->
    <!-- 将来匹配的路由对应的组件都会覆盖展示在此处 -->
    <!-- 会将这次#hash值匹配的组件替换掉上次#hash值匹配的组件, 然后展示, 即覆盖展示 -->
    <!-- 也可以使用单标签形式 -->
    <router-view></router-view>
  </div>

  <script src="./vue.js"></script>
  <script src="./vue-router.js"></script>
  <script>
    // 路由的使用步骤：
    // 1 安装: npm i -S vue-router
    // 2 引入 vue-router (vue-router.js 依赖于vue, 需要先引入vue.js)
    // 3 创建路由规则
    // 4 将路由实例与vue实例关联到一起, 即在vue实例中定义router属性, 一个vue实例/组件只能关联一个路由
    // 5 配置路由规则
    //    地址栏中URL的哈希值(#hash, 实际上就是URL中的锚点) 和 组件 的对应关系
    // 6 指定路由出口（ 表示将当前URL路径匹配的路由对应的那一个组件要展示在页面中的哪个位置 ）
    //   一个路由router只能有一个出口, 会将该路由所有匹配的组件, 都会在(只能在)这一个出口处 用路由新匹配的组件替换覆盖原来匹配的组件并展示在出口处


    // vue实例只要使用了路由, vue就会 ★自动 监听URL中的#锚点(#hash值)的变化, 只要URL中#锚点发生变化, 会自动根据制定好的路由规则去与URL中的#锚点做匹配, 自动重新初始化#hash值匹配的路由规则中对应的组件及组件的内容(生命周期钩子函数会重新被执行)并自动覆盖展示到路由的出口处 (会替换掉之前的展示)
    // ps: URL中锚点变化 页面不一定跳转的 . 只要URL中锚点发生变化, 路由就会检测到, 并做出以上处理, 与页面是否跳转无关
    //   如果当前URL的#锚点没有匹配的路由规则, 则在路由的出口处什么都不展示

    // 全局组件
    const Home = Vue.component('home', {
      template: `
        <h1>这是 Home 组件</h1>
      `
    })

    // 局部组件
    const PartHome = {
      template: `
        <h1>这是局部 Home 组件</h1>
      `
    }

    // 创建路由实例
    const router = new VueRouter({
      // 配置路由规则, 可以配置多个
      // 将URL中#锚点 (又称#hash) 的hash值与下面path进行匹配
      routes: [
        // path: URL中的#锚点, 即#hash值 (此处省略#, 在路由做匹配的时候会自动加上#). component: URL中#hash值对应的组件
        // component 可以是全局组件, 也可以是局部组件(js对象), 局部组件

        // path说明:
        //  1.可以写多层路径, 比如/home/user
        //  2. ★ 必须完全匹配, 不能多也不能少
        { path: '/home', component: Home }, // 全局组件
        { path: '/parthome', component: PartHome } // 局部组件, 由于是在路由中去使用, 由路由去自动帮我们注册局部组件, 我们在vue实例中就不用注册局部组件了
      ]
    })

    const vm = new Vue({
      el: '#app',
      data: {

      },
      // 将路由与实例关联到一起
      // router: router
      router // 简写
    })
  </script>
</body>

</html>
