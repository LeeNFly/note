<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="./vue2.js"></script>
  </head>
  <body>
    <div id="app">
      <index>

      </index>
      <!-- 使用局部组件 -->
      <!-- 组件创建一次 可以多次使用 -->
      <!-- 使用组件, 会将组件中的模板视图编译渲染后 替换并 渲染到 组件使用处, 并且该部分视图由组件内部vue实例自己维护 -->

      <product></product>
    </div>
    <script>
      // 1.1 假设创建一个product局部组件
      // 组件创建一次 可以多次使用
      let product = {
        // 组件的管理范围为template, 所以在template中可以使用和拥有vue特性, 各个组件中数据互相独立, 不共享, 不影响 数据只能使用本组件中的数据.
        template: '<div>这里是一个商品列表</div>'
      }

      // 局部组件其实就是一个js对象

      // 不一定要全局组件, 局部组件中也可以使用其他全局或局部组件
      // 局部组件中也可以直接使用vue全局组件
      // 局部组件必须先在components中声明, 声明之后才可以在实例或组件中使用
      Vue.component('index', {
        // 1.3 在index组件的模板template中使用局部组件product组件 (像html标签一样, 通过组件名使用)
        // ★★★ 在组件中引入其他组件, 由于引入组件都是以标签的方式引入的, 所以使用组件的标签中也可以使用vue特性. 因为组件是在视图中引入的, 在视图中就可以使用vue特性
        template: '<div>这是首页:<product></product></div>',
        // 1.2 如果想要使用上面的product局部组件，得在index组件中注入一下，通过components属性注入
        // 1.3 components中可以注册多个局部组件, 视图中可以使用多个组件
        // 组件创建一次 可以多次使用 (复用)
        // 组件的管理范围为template, 所以在template中可以使用和拥有vue特性, 各个组件中数据互相独立, 不共享, 不影响 数据只能使用本组件中的数据.

        components: {
          // product: product,  注入时的格式 组件名: 组件对象, 将来通过注入时的组件名来使用组件
          product // es6对象属性简写
        }
      })

      var vm = new Vue({
        el: '#app',
        data: {

        },
        // 在vue实例中也可以使用局部组件,
        // 在components中注册使用的局部组件
        components: {
          // product: product,  组件名: 组件对象
          product
        }
      })
      // 总结：
      // 局部组件可以在vue实例的视图中, 或者在全局组件或局部组件中的视图模板template中使用, 使用前必须先在components中注册声明局部组件, 注册完成后才可以使用,
      // 组件或vue实例中, 可以同时使用多个组件
      // ★ 在组件中, 也可以使用其他组件, 在组件中使用其他组件, 只能在组件的视图模板template中使用
      // ★ 在组件中(不管是全局组件还是局部组件), 都可以使用其他组件(不管是全局组件或局部组件), 且只能在组件的template模板中使用
      // 注册方式:
      // 所有局部组件的注册都通过vue实例中的components属性来注册, components中可以注册多个局部组件
      // 格式 组件名: 组件对象, components中每一个属性都是一个组件,
      // 使用时通过注册时的组件名来使用, 像html标签一样 (组件在视图模板template中使用, vue实例在视图中使用)

      // 使用组件, 会将组件中的模板视图 替换并 渲染到 组件使用处, 并且该部分视图由组件内部vue实例自己维护

      // ★★★ 组件多次使用, 每次使用都会重新创建一个新的组件, 包括数据初始化, 以及视图初始化, 以及钩子函数重新执行等, 且多次使用组件之间是互相独立的, 互不影响, 互不干扰


      //  局部组件总结：
      // 1. 局部组件其实就是一个js对象, 每个vue实例/全局组件/局部组件都可以定义局部组件
      // 2. 在vue实例/全局或局部组件中的components中可以定义★局部 组件, 定义后, 可以在对应vue实例的视图/组件的视图模板中使用局部组件. 使用方式直接将组件名当作标签名 类似于标签的使用方式
      // 3. components, 是vue实例/组件对象的一个属性, 是一个对象, 每个键值对都是一个局部组件, 属性名为局部组件名, 属性值为一个JS对象, 是局部组件

      // 局部组件有2种方式,
      //    第一种是将局部组件对象在外部定义, 然后可以被多个组件所使用, (在components中定义组件时直接引用外部的局部组件JS对象)
      //    第二种就是局部组件对象在components中定义局部组件时声明, 这种方法的话, 声明的局部组件只能在当前组件中使用, 无法被其他组件复用
      // ★ 组件的template视图中也和原来vue实例一样, 只有插值表达式和指令会被解析和执行, 其他都当作标签或者普通文本. template用来写html标签的, 其实就是html标签, 写法和原来html标签一样 包括给标签添加类名class, 行内样式style等, 都可以直接在标签上写, 和原来一样.. 
      // 在vue实例, 组件中使用其他组件, 都是在各自的视图, 视图模板中使用.

      
    </script>
  </body>
</html>
