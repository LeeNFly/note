# require函数

require函数的作用就是用来导入模块的！！

## node.js中的模块分类

1. 核心模块（内置模块） fs path url http querystring
2. 第三方包模块    mime  art-template moment
3. 目录模块
4. 文件模块

★★★ 模块分类为以上四个, 之前说的模块化导出项等, 四种模块均适用, 只要是nodejs模块, 都适用

一、在引入核心模块和第三方包模块的时候，直接给require函数传递包名称即可：
    require('包名')
 当require函数接收到一个包名称的时候
require('包名')语句被执行后, 做了什么?
1. 会先去找核心模块中是否有对应的模块，如果找到了就直接使用
2. 如果没有找到，就去当前执行目录的node_modules中查找对应的包名模块，如果找到了就直接使用
3. 如果没有找到，就去上一级目录中的node_modules中找，如果找到了就直接使用
4. 如果没找到继续往上级目录中的node_modules，找到根目录如果还没找到就报错了 can not find module xxx
    找到包名文件夹后, 做了啥?
    1、执行文件夹下的package.json中main属性对用的js文件(模块), 同步执行, 
    2、执行完毕后返回到require('包名')  (引包处), 继续执行引包处之后的代码
    3、若js文件有导出项, 则可以在引包处定义一个变量来接收导出项, 引包require函数的返回值就是执行的js文件的导出项
    本质上引包还是执行了一个js文件

### package.json中的main属性
告诉require函数在引入当前包的时候，具体引用哪个文件！
```json
{
    "main": "文件路径"
}
```
main对应的文件路径是相对于引入的包对应的包的package.json所在目录的相对路径, 包含路径和文件名及后缀

二、在引入模块的时候，如果传递给require函数的是一个路径作为参数，那么引入的就是目录模块或者文件模块   如果require接收的参数是以./ ../开头的, 则就当作路径来解析, 是引入目录模块或文件模块

当require('文件路径')语句被执行后作了什么?
1. 按照路径查找对应的文件, 如果找到了直接引入
2. 如果没有找到，找文件名对应的 .js .json .node
3. 如果没有找到，就找路径对应的文件夹
    1. 如果找到了对应的文件夹
        1. 判断当前文件夹中是否有package.json文件
            1. 如果没有，就直接引用index.js
            2. 如果有package.json文件，则找main属性对应的js文件
                1. 如果main属性不存在 则引用index.js json node
                2. 如果main属性存在 则引用main属性指定的文件
4. 如果没找到，就直接报错了

    找到对应的js文件后做了什么？
    1、执行js文件(模块), 同步执行
    2、执行完毕后返回到require('文件路径')  (引入模块处), 继续执行引包处之后的代码
    3、若js文件有导出项, 则可以在引用模块处定义一个变量来接收导出项, 引用模块的require函数的返回值就是执行的js文件的导出项


require如何知道引入的是包名还是路径名? 
如果require接收的参数是以./或../开头, 则require认为引入的是路径, 就是目录模块或文件模块, 
否则就当作包名来解析, 引入的是核心模块或第三方模块

