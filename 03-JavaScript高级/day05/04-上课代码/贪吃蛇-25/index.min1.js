/**
 * Created by luodianlei on 2018/6/25.
 */
var Tool={getRandom:function(b,a){return Math.floor(Math.random()*(a-b+1))+b}};(function(){var a;function b(c){c=c||{};this.width=c.width||20;this.height=c.height||20;this.bgc=c.bgc||"green";this.x=c.x||0;this.y=c.y||0}b.prototype.render=function(){if(a){map.removeChild(a)}var c=document.createElement("div");a=c;c.style.width=this.width+"px";c.style.height=this.height+"px";c.style.backgroundColor=this.bgc;this.x=Tool.getRandom(0,map.offsetWidth/this.width-1)*this.width;this.y=Tool.getRandom(0,map.offsetHeight/this.height-1)*this.height;c.style.left=this.x+"px";c.style.top=this.y+"px";c.style.position="absolute";map.appendChild(c)};window.Food=b})();(function(){var a=[];function b(c){c=c||{};this.width=c.width||20;this.height=c.height||20;this.direction="right";this.body=[{x:3,y:2,col:"red"},{x:2,y:2,col:"blue"},{x:1,y:2,col:"blue"}]}b.prototype.render=function(){for(var d=0,c=a.length;d<c;d++){map.removeChild(a[0]);a.splice(0,1)}this.body.forEach(function(e){var f=document.createElement("div");a.push(f);f.style.width=this.width+"px";f.style.height=this.height+"px";f.style.backgroundColor=e.col;f.style.left=e.x*this.width+"px";f.style.top=e.y*this.height+"px";f.style.position="absolute";map.appendChild(f)}.bind(this))};b.prototype.move=function(){for(var c=this.body.length-1;c>0;c--){this.body[c].x=this.body[c-1].x;this.body[c].y=this.body[c-1].y}switch(this.direction){case"left":this.body[0].x-=1;break;case"right":this.body[0].x+=1;break;case"top":this.body[0].y-=1;break;case"bottom":this.body[0].y+=1;break}};window.Snake=b})();(function(){function a(){this.food=new Food();this.snake=new Snake()}a.prototype.start=function(){this.food.render();this.snake.render();var b=setInterval(function(){this.snake.move();var g=map.offsetWidth/this.snake.width-1;var f=map.offsetHeight/this.snake.height-1;var d=this.snake.body[0];if(d.x<0||d.y<0||d.x>g||d.y>f){alert("game over");clearInterval(b);return}var c=this.snake.body[0].x*this.snake.width;var h=this.snake.body[0].y*this.snake.height;if(this.food.x==c&&this.food.y==h){this.food.render();var e=this.snake.body[this.snake.body.length-1];this.snake.body.push({x:e.x,y:e.y,col:e.col})}this.snake.render()}.bind(this),150);document.onkeydown=function(c){switch(c.keyCode){case 37:if(this.snake.direction==="right"){break}this.snake.direction="left";break;case 38:if(this.snake.direction==="bottom"){break}this.snake.direction="top";break;case 39:if(this.snake.direction==="left"){break}this.snake.direction="right";break;case 40:if(this.snake.direction==="top"){break}this.snake.direction="bottom";break}}.bind(this)};window.Game=a})();