<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  var a = 1;
  function fn(){
//    var a = 2;
    console.log(a);
  }


  
  
  //词法作用域(静态作用域)(变量查找规则): 代码一旦书写完毕,那么作用域就形成了,跟调用函数没有关系
//  1. 外部作用域不能访问内容作用域的变量, 内部可以访问外部
//  2. 访问/查找/使用/操作/赋值变量的时候,先在自己的当前作用域中查找, 找到了直接使用(可以获取值, 也可以赋值),并停止查找 如果找不到就沿着作用域链往上找,找到了直接使用(可以获取值, 也可以赋值),停止查找,找不到继续往上找 (只能往上找,不能往下找),直到全局
//  3. 延续2. 如果只是访问变量,如果找到全局都没有的话,会报错(xxx is not  defined)
//  4. 延续2. 如果要给变量赋值, 在自己作用域或沿着作用域链找到了, 则直接给变量赋值, 并停止查找, 若找到全局都没有的话,那么浏览器会帮我们在全局自动创建这个变量 (隐式全局)
//  5. ★ 给变量赋值之前/变量访问, 获取, 使用, 操作之前,要先通过词法作用域找到变量, 然后才进行赋值或访问, 获取, 使用, 操作
//  6. 代码执行之前,要考虑预解析规则,函数的代码执行之前,也要执行预解析规则
//  ps: 词法作用域和作用域链 是查找 变量 的规则
//  ★: 访问和使用变量, 除了参考词法作用域, 还要参考 预解析 和 代码的执行顺序, 来看当前访问的变量是否声明及当前访问变量的值是多少
//  ★: 作用域只是访问变量的规则 不是访问数据的规则  比如将沙箱里的函数暴露到全局 全局只要有这个函数地址的变量 就可以调用函数 比如将沙箱里的引用变量暴露到全局 全局有这个引用地址的变量 就可以操作和访问地址里的数据了

  // 作用域链:在js中,函数会构成一个局部作用域, 全局中有函数,全局的是0级链,全局中的函数构造1级链, 函数中如果再有函数就是2级链,这样的一个关系,就是作用域链
  // 同级链中函数只能访问自身的局部变量 无法访问同级链中其他函数中的局部变量
  // 作为参数的函数 作用域链的级数 与 函数调用处同级
  // ★★★ 调用函数时候， 函数体中访问/使用/操作变量先在自身函数作用域内查找, 若没找到, 则从函数的声明 所在处开始, 沿着作用域链往上查找, 后面同词法作用域2.3.4点！！
</script>

<!-- 一个html中可以写多个script标签,他们都是同一个全局作用域 , 也可以引入多个js文件, 与引入的js文件也是同一个全局作用域, 多个引入的js文件之间也是同一个全局作用域 与script标签也是同一个全局作用域。 数据互通, 数据共享, 会相互影响 -->
<!-- 一个页面的多个script标签,和引入的多个js文件, 都是在当前引入文件的页面执行(获取的dom元素或jq对象等, 都是从当前引入页面上获取的), 他们都是同一个全局作用域,所以数据互通, 数据共用, 相互影响, 都可以获取、操作、和使用, 声明、 赋值, 遵循作用域规则, 共同作用于同一个作用域 -->
<!--  一个页面的多个script标签,和引入的多个js文件都会按照顺序从上到下进行解析和执行 -->
<!-- 因为一个页面的多个script 和 引入的js文件共享同一个全局作用域, 所以 在各自script标签之前或引入js文件之前 引入的插件, 是可以共享的 -->
<!-- 一个页面只有一个js全局作用域, 页面中的多个script标签, 以及引入的多个js文件, 共享这一个全局作用域 -->
<!-- ps: js运行环境中不能在引入其他js文件, 即script标签内 以及 .js文件里, 不能引入其他js文件 -->
<!-- ★★★ 页面中多个script标签, 和引入的多个js文件, js代码作用的是同一个页面(标签元素), 因为本质上是在当前页面引入js文件, 去请求js的, 所以执行js文件里的js代码也在当前页面 -->
<!-- 注意: 一个页面的多个script标签和引入的多个js文件, 虽然共享一个全局作用域, 数据互通, 数据共用, 都可以获取、操作、和使用 
          但是他们的预解析是独立的, 各个script标签, 和 各个引入的js文件, 他们的预解析是独立进行的,
          浏览器从上到下解析执行, 碰到一个引入的js文件, 先会预解析这个js文件里的js代码, 然后再一行一行进行代码的解析和执行, 执行完后会到引入的js文件处, 继续往下解析执行
          如果碰到script标签, 就会先预解析这个script标签内的所有代码, 然后再一行一行进行解析和执行, 执行结束后继续往下执行js文件或script标签里的代码
     
     由于各自预解析的独立的, 所以一个引入多个js文件和书写多个script标签时候, 要考虑书写顺序.
-->
<!-- 注意: 一个页面的多个script标签和引入的多个js文件, 浏览器都会按照顺序进行解析和执行, 并且会进行数据保持, 将数据都存储在浏览器的内存里, 他们共享一个全局作用域, 数据互通, 数据共用, 都可以获取、操作、和使用,  -->
<!-- ★★★ 页面通过script标签引入js文件, 是同步加载执行的, 即要等待上一个js文件全部加载完毕(执行完毕), 页面才会继续往下执行代码
           引入js文件的执行作用域和页面共享同一个全局作用域

      注意: js环境中, 如script标签内, .js文件中, 不能再引入js文件了.

      注意: 页面中的script标签和引入的js文件, 都是按顺序从上往下执行, 且是同步执行的, 全部执行完前面的才会接着执行后面的

      注意: ★★★ 引入js文件, js文件中若有涉及到相对路径的, 相对路径的出发点是从引入js文件的这个页面文件开始
-->
<script> a = 10</script>
<script> console.log(a); //10
    fn(); //10
 </script>
</body>
</html>